var_N_bar <- (cn_1 * cn_2 * x_12 * x_21) / (cm^2 * (m+2))
var_N_bar
# chapman variance
var_N_bar <- (cn_1 * cn_2 * x_12 * x_21) / (cm^2 * (m+2))
abline()
?abline
abline(B_0, B_1)
# estimating total # dead trees in an area
mu_x <- 11.3 # population mean of dead trees
n <- 25 # tree sample
B_0 <- 5.06
B_1 <- 0.61
abline(B_0, B_1)
plot.new()
abline(B_0, B_1)
plot.new()
abline(B_0, B_1)
curve(B_0 + B_1*x)
B_1 <- 0.61
y_bar_reg <- B_0_hat + (B_1_hat * mu_x)
# estimating total # dead trees in an area
mu_x <- 11.3 # population mean of dead trees
n <- 25 # tree sample
B_0_hat <- 5.06
B_1_hat <- 0.61
y_bar_reg <- B_0_hat + (B_1_hat * mu_x)
s_e_sq <- 5.55
N <- 100
# day 18 regression estimation
# estimating total # dead trees in an area
mu_x <- 11.3 # population mean of dead trees
N <- 100
n <- 25 # tree sample
B_0_hat <- 5.06
B_1_hat <- 0.61
s_e_sq <- 5.55
y_bar_reg <- B_0_hat + (B_1_hat * mu_x)
t_hat_y_reg <- N * y_bar_reg
var_y_bar_reg <- (1-(n/N)) * (s_e_sq / n)
y_bar_reg
t_hat_y_reg
var_y_bar_reg
# hw 9, covers capture-recapture and regression estimation
n_1 <- 16
n_2 <- 19
m <- 11
# a) estimate N_hat, the number of fishermen in the region
x_11 <- m
x_12 <- n_1 - m
x_21 <- n_2 - m
x_22 <- (x_12 * x_21) / x_11
xs <- c(x_11, x_12, x_21, x_22)
N_hat <- sum(xs)
N_hat
# b) variance of N_hat
var_N_hat <- (n_1 * n_2 * x_12 * x_21) / m^3
var_N_hat
# c) estimate N_bar (chapman estimator)
cn1 <- n_1 + 1
cn2 <- n_2 + 1
cm <- m + 1
N_bar <- ((cn1 * cn2) / cm) - 1
N_bar
# d) variance of chapman estimator
var_N_bar <- (cn1 * cn2 * x_12 * x_21) / (cm^2 * (m+2))
var_N_bar
us_counties_total <- 1,242
us_counties_total <- 1 124
counties
nrow(counties)
# a) histogram of # of physicians
hist(counties$physician)
counties
hist(counties$physician)
counties
# a) histogram of # of physicians
hist(counties$physician)
N<- us_population <- 255077563
# b) estimate total number of physicians in the US
t_HT <-
N
N
# question 2
n <- us_counties_sampled <- nrow(counties)
N <- us_counties_total <- 3141
us_population <- 255077563
# a) histogram of # of physicians
hist(counties$physician)
N
y_bar <- mean(counties$physician)
t_hat_HT <- N * y_bar
t_hat_HT
# c) estimate the standard error of (b)
s_y_2 <- (1/(n-1)) * sum((counties$physician-y_bar)^2)
s_y_2 <- (1/(n-1)) * sum((counties$physician-y_bar)^2)
var_t_HT <- N^2 * (1-(n/N)) * (s_y_2 / n)
se <- sqrt(var_t_HT)
var_t_HT
s_y_2
N^2
N
n
N
n
var_t_HT <- N^2 * (1-(n/N)) * (s_y_2 / n)
var_t_HT
se
# d)
plot(counties$totpop, counties$physician)
?plot
# d)
?plot(counties$totpop, counties$physician, xlim=c(0,200000), ylim=c(0,400))
# d)
plot(counties$totpop, counties$physician, xlim=c(0,200000), ylim=c(0,400))
x_bar <- mean(counties$totpop)
B <- y_bar / x_bar
t_yr <- B * t_hat_HT
var_t_HT
x_bar <- mean(counties$totpop)
B <- y_bar / x_bar
t_yr <- B * N
var_t_HT
x_bar <- mean(counties$totpop)
B <- y_bar / x_bar
t_yr <- B * t_hat_HT
t_yr
t_yr <- B * N
t_yr
x_bar <- mean(counties$totpop)
B <- y_bar / x_bar
t_yr <- B * N
t_yr
t_x <- us_population <- 255077563
t_yr <- B * t_x
t_yr
# f) standard error of (e)
s_e_2 <- (1/(n-1)) * sum((counties$physician - (B*counties$totpop))^2)
var_B <- (1/(n-1)) * (s_e_2)/(n*x_bar^2)
s_e_2 <- (1/(n-1)) * sum((counties$physician - (B*counties$totpop))^2)
var_B <- (1/(n-1)) * (s_e_2)/(n*x_bar^2)
se <- var_B
se
s_e_2
s_e_2 <- (1/(n-1)) * sum((counties$physician - (B*counties$totpop))^2)
var_B <- (1/(n-1)) * (s_e_2)/(n*x_bar^2)
var_t_yr <- t_x * var_B
sqrt(var_t_yr)
s_e_2 <- (1/(n-1)) * sum((counties$physician - (B*counties$totpop))^2)
var_B <- (1/(n-1)) * (s_e_2)/(n*x_bar^2)
var_t_yr <- t_x^2 * var_B
sqrt(var_t_yr)
var_t_yr
s_e_2
s_e_2 <- (1/(n-1)) * sum((counties$physician - (B*counties$totpop))^2)
var_B <- (1/(n/N)) * (s_e_2)/(n*x_bar^2)
var_t_yr <- t_x * var_B
sqrt(var_t_yr)
s_e_2 <- (1/(n-1)) * sum((counties$physician - (B*counties$totpop))^2)
var_t_yr <- (t_x / x_bar)^2 * (1- (n/N)) * (s_e_2 / n)
sqrt(var_t_yr)
model <- lm(counties$physician ~ counties$totpop, data = df)
# g) estimate the total number of physicians in the US using regression estimation
model <- lm(counties$physician ~ counties$totpop)
coef(model)
coef(model)[1]
coef(model)[1][1]
coef(model)
model <- lm(counties$physician ~ counties$totpop)
coef(model)
B_0 <- -54.23
B_1 <- 0.00296
mu_x <- t_x / N
y_bar_reg <- B_0 + (B_1 * mu_x)
t_y_reg <- N * y_bar_reg
t_y_reg
t_y_reg
# h) standard error od (g)
e
e <- counties$physician - (B_0 + (B_1 * counties$totpop))
s_e_2 <- (1/ (n-1)) * sum(e^2)
var_y_reg <- (1-(n/N)) * (s_e_2 / n)
var_t_y_reg <- N^2 * var_y_reg
var_t_y_reg
sqrt(var_t_y_reg)
# e) total number of physicians in the US using ratio estimation
x_bar <- mean(counties$totpop)
B <- y_bar / x_bar
t_yr <- B * t_x
t_yr
# f) standard error of (e)
s_e_2 <- (1/(n-1)) * sum((counties$physician - (B*counties$totpop))^2)
var_t_yr <- (t_x / x_bar)^2 * (1- (n/N)) * (s_e_2 / n)
sqrt(var_t_yr)
# g) estimate the total number of physicians in the US using regression estimation
model <- lm(counties$physician ~ counties$totpop)
coef(model)
B_0 <- -54.23
B_1 <- 0.00296
mu_x <- t_x / N
y_bar_reg <- B_0 + (B_1 * mu_x)
t_y_reg <- N * y_bar_reg
t_y_reg
# h) standard error od (g)
e <- counties$physician - (B_0 + (B_1 * counties$totpop))
s_e_2 <- (1/ (n-1)) * sum(e^2)
var_y_reg <- (1-(n/N)) * (s_e_2 / n)
var_t_y_reg <- N^2 * var_y_reg
sqrt(var_t_y_reg)
# e) total number of physicians in the US using ratio estimation
x_bar <- mean(counties$totpop)
B <- y_bar / x_bar
t_yr <- B * t_x
t_yr
# f) standard error of (e)
s_e_2 <- (1/(n-1)) * sum((counties$physician - (B*counties$totpop))^2)
var_t_yr <- (t_x / x_bar)^2 * (1- (n/N)) * (s_e_2 / n)
sqrt(var_t_yr)
# g) estimate the total number of physicians in the US using regression estimation
model <- lm(counties$physician ~ counties$totpop)
# coef(model)
B_0 <- -54.23
B_1 <- 0.00296
mu_x <- t_x / N
y_bar_reg <- B_0 + (B_1 * mu_x)
t_y_reg <- N * y_bar_reg
t_y_reg
# h) standard error od (g)
e <- counties$physician - (B_0 + (B_1 * counties$totpop))
s_e_2 <- (1/ (n-1)) * sum(e^2)
var_y_reg <- (1-(n/N)) * (s_e_2 / n)
var_t_y_reg <- N^2 * var_y_reg
sqrt(var_t_y_reg)
# b) estimate total number of physicians in the US
y_bar <- mean(counties$physician)
t_hat_HT <- N * y_bar
t_hat_HT
# c) estimate the standard error of (b)
s_y_2 <- (1/(n-1)) * sum((counties$physician-y_bar)^2)
var_t_HT <- N^2 * (1-(n/N)) * (s_y_2 / n)
se <- sqrt(var_t_HT)
var_t_HT
# d)
# plot(counties$totpop, counties$physician, xlim=c(0,200000), ylim=c(0,400))
# it seems as thought the line of best fit would go through the origin, so ratio estimation should be sufficient
# e) total number of physicians in the US using ratio estimation
x_bar <- mean(counties$totpop)
B <- y_bar / x_bar
t_yr <- B * t_x
t_yr
# f) standard error of (e)
s_e_2 <- (1/(n-1)) * sum((counties$physician - (B*counties$totpop))^2)
var_t_yr <- (t_x / x_bar)^2 * (1- (n/N)) * (s_e_2 / n)
sqrt(var_t_yr)
# g) estimate the total number of physicians in the US using regression estimation
model <- lm(counties$physician ~ counties$totpop)
# coef(model)
B_0 <- -54.23
B_1 <- 0.00296
mu_x <- t_x / N
y_bar_reg <- B_0 + (B_1 * mu_x)
t_y_reg <- N * y_bar_reg
t_y_reg
# h) standard error od (g)
e <- counties$physician - (B_0 + (B_1 * counties$totpop))
s_e_2 <- (1/ (n-1)) * sum(e^2)
var_y_reg <- (1-(n/N)) * (s_e_2 / n)
var_t_y_reg <- N^2 * var_y_reg
sqrt(var_t_y_reg)
var_t_y_reg <- N^2 * var_y_reg
response_rate <- 75%
response_rate <- 0.75
n <- 200 # high school seniors
N <- 2000
response_rate <- 0.75
n <- 200 # high school seniors
N <- 2000
response_rate <- 0.75
data.frame("a"=c(1,2), "b"=c(1,2))
data.frame("ssize"=c(75, 72, 53, 200),
"numrespond"=c(66, 58, 26, 150),
"y_bar"=c(20, 27, 31))
data.frame("ssize"=c(75, 72, 53, 200),
"numrespond"=c(66, 58, 26, 150),
"y_bar"=c(20, 27, 31, na))
data.frame("ssize"=c(75, 72, 53, 200),
"numrespond"=c(66, 58, 26, 150),
"y_bar"=c(20, 27, 31, NA))
data.frame("ssize"=c(75, 72, 53, 200),
"numrespond"=c(66, 58, 26, 150),
"y_bar"=c(20, 27, 31, NA),
"s_y"=c(9, 12, 14, NA), row.names=c("3to4", "2to3", "below2"))
data.frame("ssize"=c(75, 72, 53, 200),
"numrespond"=c(66, 58, 26, 150),
"y_bar"=c(20, 27, 31, NA),
"s_y"=c(9, 12, 14, NA), row.names=c("3to4", "2to3", "below2", "total"))
data <- data.frame("ssize"=c(75, 72, 53, 200),
"numrespond"=c(66, 58, 26, 150),
"y_bar"=c(20, 27, 31, NA),
"s_y"=c(9, 12, 14, NA), row.names=c("3to4", "2to3", "below2", "total"))
data$3to4
data$class1
data[class1]
data["class1"]
data["class1",]
data <- data.frame("ssize"=c(75, 72, 53, 200),
"numrespond"=c(66, 58, 26, 150),
"y_bar"=c(20, 27, 31, NA),
"s_y"=c(9, 12, 14, NA), row.names=c("class1", "class2", "class3", "total"))
data["class1",]
# a) what is the sampling weight w_i
w_i <- N/n
w_i
data <- data.frame("ssize"=c(75, 72, 53, 200),
"numrespond"=c(66, 58, 26, 150),
"y_bar"=c(20, 27, 31, 0),
"s_y"=c(9, 12, 14, 0), row.names=c("class1", "class2", "class3", "total"))
# b) estiamte GPA ignoring nonreponse
y_bar <- sum(data$y_bar) / n
y_bar
data$numrespond[3,]
data$numrespond[3:]
data$numrespond[,3]
data$numrespond[1:3]
# b) estiamte GPA ignoring nonreponse
y_bar <- sum((data$numrespond[1:3] * data$y_bar[1:3])/data$numrespond[4])
y_bar
data
a_c
# e) with N_c unknown, calculate the adjusted weights
a_c <- sum(data$ssize[1:3] * w_i) / sum(data$numrespond[1:3] * w_i)
a_c
data$ssize[1:3] * w_i
data$numrespond[1:3] * w_i
# e) with N_c unknown, calculate the adjusted weights
a_c <- (data$ssize[1:3] * w_i) / (data$numrespond[1:3] * w_i)
a_c
w_c <- a_c * w_i
w_c
# f) estimate of population mean GPA
y_bar <- sum(w_c*data$numrespond[1:3]*data$y_bar[1:3]) / sum(w_c*data$numrespond[1:3])
y_bar
# g) N_c is known
N_c <- c(700, 400, 800)
b_c <- N_c / (data$numrespond[1:3] * w_i)
b_c
N_c <- c(700, 400, 800)
b_c <- N_c / (data$numrespond[1:3] * w_i)
w_c_new <- b_c * w_i
y_bar_new <- sum(w_c_new*data$numrespond[1:3]*data$y_bar[1:3]) / sum(w_c_new*data$numrespond[1:3])
# e) with N_c unknown, calculate the adjusted weights
a_c <- (data$ssize[1:3] * w_i) / (data$numrespond[1:3] * w_i)
w_c <- a_c * w_i
w_c
# f) estimate of population mean GPA
y_bar <- sum(w_c*data$numrespond[1:3]*data$y_bar[1:3]) / sum(w_c*data$numrespond[1:3])
y_bar
# g) N_c is known
N_c <- c(700, 400, 800)
b_c <- N_c / (data$numrespond[1:3] * w_i)
w_c_new <- b_c * w_i
w_c_new
# h) new population mean GPA estimate
y_bar_new <- sum(w_c_new*data$numrespond[1:3]*data$y_bar[1:3]) / sum(w_c_new*data$numrespond[1:3])
y_bar_new
b_c
N_c <- c(700, 800, 500)
b_c <- N_c / (data$numrespond[1:3] * w_i)
w_c_new <- b_c * w_i
w_c_new
# h) new population mean GPA estimate
y_bar_new <- sum(w_c_new*data$numrespond[1:3]*data$y_bar[1:3]) / sum(w_c_new*data$numrespond[1:3])
y_bar_new
# e) with N_c unknown, calculate the adjusted weights
a_c <- (data$ssize[1:3] * w_i) / (data$numrespond[1:3] * w_i)
w_c <- a_c * w_i
w_c
# f) estimate of population mean GPA
y_bar <- sum(w_c*data$numrespond[1:3]*data$y_bar[1:3]) / sum(w_c*data$numrespond[1:3])
y_bar
# g) N_c is known
N_c <- c(700, 800, 500)
b_c <- N_c / (data$numrespond[1:3] * w_i)
w_c_new <- b_c * w_i
w_c_new
# h) new population mean GPA estimate
y_bar_new <- sum(w_c_new*data$numrespond[1:3]*data$y_bar[1:3]) / sum(w_c_new*data$numrespond[1:3])
y_bar_new
# b) estiamte GPA ignoring nonreponse
y_bar <- sum((data$numrespond[1:3] * data$y_bar[1:3])/data$numrespond[4])
y_bar
# c) p value of whether the rate is the same across classes is 0.000001
# the p values is < 0.05, so we reject the null, showing that the rate is different between classes, and that MAR of MNAR could be appropriate
# d) anova test p value is 0.000003
# we reject the null, showing that the # of hours of TV watched is different between the classes. Based on this, GPA is an appropriate variable to define the weighting classes
# e) with N_c unknown, calculate the adjusted weights
a_c <- (data$ssize[1:3] * w_i) / (data$numrespond[1:3] * w_i)
w_c <- a_c * w_i
# f) estimate of population mean GPA
y_barr <- sum(w_c*data$numrespond[1:3]*data$y_bar[1:3]) / sum(w_c*data$numrespond[1:3])
y_barr
# g) N_c is known
N_c <- c(700, 800, 500)
b_c <- N_c / (data$numrespond[1:3] * w_i)
w_c_new <- b_c * w_i
# h) new population mean GPA estimate
y_bar_new <- sum(w_c_new*data$numrespond[1:3]*data$y_bar[1:3]) / sum(w_c_new*data$numrespond[1:3])
y_bar_new
USArrests
usa <- USArrests
usa
usa["Virginia",]
usa
usa <- USArrests
usa[46,1:2] <- NA
usa["Virginia",]
# b) cell mean imputation
UrbanPop.cat <- ifelse(usa$UrbanPop < 66, 1, 0)
usa
data(state)
usa
state
state
data::state
data(state)
data(state)
c<-data(state)
state
c
state.region
state.region[46]
state.region[46]
# b) cell mean imputation
UrbanPop.cat <- ifelse(usa$UrbanPop < 66, 1, 0)
UrbanPop.cat
UrbanPop.cat[46]
state.region[46]
# virginia is 65% or lower and south
usa[UrbanPop.cat == 1 & state.region == "South", ]
# virginia is 65% or lower and south
cell_mean_d <- usa[UrbanPop.cat == 1 & state.region == "South", ]
c(mean(cell_mean_d$Murder), mean(cell_mean_d$Assault))
mean(cell_mean_d$Murder)
cell_mean_d
cell_mean_d <- cbind(usa, UrbanPop.cat)
cell_mean_d <- cbind(cell_mean_d, state.region)
VA.cell <- cell_mean_d[UrbanPop.cat==1 & state.region=="South",]
cell_mean_d
c(mean(VA.cell$Murder), mean(VA.cell$Assault))
VA.cell
c(mean(cell_mean_d$Murder), mean(cell_mean_d$Assault))
cell_mean_d
cell_mean_d$Murder
mean(cell_mean_d$Murder)
cell_mean_d$Murder
cell_mean_d
c(mean(cell_mean_d$Murder, na.rm = T), mean(cell_mean_d$Assault, na.rm = T))
VA.cell
c(mean(VA.cell$Murder, na.rm = T), mean(VA.cell$Assault, na.rm = T))
result <- fGarch::garchFit(~1+garch(6,0), data=rt, trace=F)
library(fGarch)
library(astsa)
data <- read.table("m-ko-6111.txt", header=T)
rt <- log(data$ko+1)
rt <- ts(rt, frequency=12, start=c(1961,1))
plot.ts(rt, xlab='year', ylab='log return')
par(mfcol=c(1,2))
acf(rt, lag=24, main="ACF of Log Returns")
acf(abs(rt), lag=24, main="ACF of Abs Log Returns")
t.test(rt)
res<-rt-mean(rt)
Box.test(res^2, lag=12, type='Ljung')
acf2(res^2)
result <- fGarch::garchFit(~1+garch(2,0), data=rt, trace=F)
summary(result)
result <- fGarch::garchFit(~1+garch(6,0), data=rt, trace=F)
summary(result)
result <- fGarch::garchFit(~1+garch(1,0), data=rt, trace=F)
summary(result)
df <- read.csv("life_expectancy_data.csv")
df1 <- df[df$Status == "Developing",]
df2 <- df1[df1$Life_expectancy_decade=="70s" | df1$Life_expectancy_decade=="80s",]
avg <- mean(df2$Health_expenditure_percentGovSpend, na.rm = T)
avg
setwd("/Users/ryanlevy/Library/CloudStorage/OneDrive-UniversityofVirginia/Y4/S02/Capstone/Capstone/data")
passive_ownership <- read.csv("13f_api_outputs/BVS_13f_holdings_panel")
passive_ownership <- read.csv("13f_api_outputs/BVS_13f_holdings_panel")
setwd("/Users/ryanlevy/Library/CloudStorage/OneDrive-UniversityofVirginia/Y4/S02/Capstone/Capstone/data")
passive_ownership <- read.csv("13f_api_outputs/BVS_13f_holdings_panel")
passive_ownership <- read.csv("13f_api_outputs/BVS_13f_holdings_panel.csv")
passive_ownership <- read.csv("13f_api_outputs/BVS_13f_holdings_panel.csv")
passive_ownership <- read.csv("BVS_13f_holdings_panel.csv")
passive_ownership <- read.csv("BVS_13f_holdings_panel.csv")
ls
list.files()
setwd("/Users/ryanlevy/Library/CloudStorage/OneDrive-UniversityofVirginia/Y4/S02/Capstone/Capstone/data")
list.files()
library(readr)
BVS_13f_holdings_panel <- read_csv("13f_api_outputs/BVS_13f_holdings_panel.csv")
View(BVS_13f_holdings_panel)
passive_ownership <- read.csv("13f_api_outputs/BVS_13f_holdings_panel.csv")
getwd()
passive_ownership <- read.csv("13f_api_outputs/BVS_13f_holdings_panel.csv")
getwd()
list.files()
list.files(recursive = TRUE)
passive_ownership <- read.csv("./13f_api_outputs/BVS_13f_holdings_panel.csv")
list.files("13f_api_outputs")
file.exists("13f_api_outputs/BVS_13f_holdings_panel.csv")
passive_ownership <- read.csv(list.files(recursive = TRUE)[2])
head(passive_ownership)
getwd()
rstudioapi::getActiveProject()
